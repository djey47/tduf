buildscript {
    repositories {
        mavenLocal()
        mavenCentral()
//        maven {
//            url "http://repo1.maven.org/maven2/"
//        }
    }
    dependencies {
        classpath group: 'org.ajoberstar', name: 'gradle-git', version:'0.12.0'
    }
}


allprojects {
    group = 'fr.tduf'
    version = '0.1'

    apply plugin: 'java'
    apply plugin: 'org.ajoberstar.release-base'


    compileJava {
        sourceCompatibility = JavaVersion.VERSION_1_8
        targetCompatibility = JavaVersion.VERSION_1_8
    }

    task fatJar(type: Jar) {
        mustRunAfter 'jar'

        baseName = 'tduf-' + project.name + '-all'
        from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
        with jar
    }

//    ext.tag = "REL-${project.version.toString()}"


    task pack {


    }
}

subprojects {
    repositories {
        mavenLocal()
        mavenCentral()
//        maven {
//            url "http://repo1.maven.org/maven2/"
//        }
    }
    dependencies {
        compile group: 'org.codehaus.jackson', name: 'jackson-mapper-asl', version: '1.9.13'
        compile group: 'com.google.guava', name: 'guava', version: '18.0'
        compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.3.2'

        testCompile group: 'junit', name: 'junit', version: '4.11'
        testCompile group: 'org.assertj', name: 'assertj-core', version: '1.7.0'
        testCompile group: 'net.sf.json-lib', name: 'json-lib', classifier: 'jdk15', version: '2.4'
    }
}

project(':cli') {
    dependencies {
        compile project(':lib-unlimited')

        compile group: 'args4j', name: 'args4j', version: '2.0.29'
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.13'
}